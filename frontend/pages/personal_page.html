<?php
session_start();
$_SESSION['ref_user'] = $_GET['ref_username'];
$_SESSION['ref_userid'] = $_GET['ref_id'];

require_once '../../backend/user.php';
require_once '../../backend/post.php';
$user = new User();
$post = new Post();
$stat = $user->get_user_stats($_SESSION['ref_userid']);
$description = $user->get_user_description($_SESSION['ref_userid']);
$posts = $post->get_by_user($_SESSION['ref_userid'], 4);
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <title>Artify Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../style/style.css" />
    <link rel="stylesheet" type="text/css" href="../style/personal_page.css" />
    <script src="https://kit.fontawesome.com/391827d54c.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="logo-container">
            <span class="dot"></span>
            <h2 class="username">
                <?php echo $_SESSION['ref_user'] ?>
            </h2>
        </div>
        <div class="counter-container">
            <h3 class="follower-counter">
                <?php echo $stat[0]; ?> followers
            </h3>
            <h3 class="following-counter">
                <?php echo $stat[1]; ?> following
            </h3>
            <h3 class="post-counter">
                <?php echo $stat[2]; ?> posts
            </h3>
        </div>
        <div class="description-container">
            <h4 class="description">
                <?php $description ?>
            </h4>
        </div>
        <div class="button-container">
            <span class="little-dot">
                <i class="fa-solid fa-user-plus"></i>
            </span>
            <span class="little-dot"></span>
        </div>
    </div>
    <div class="post-container">
        <?php foreach($posts as $p): ?>
        <div class="post">
            <h3 class="post-creator">
                <?php echo $_SESSION['ref_user']; ?>
            </h3>
            <img class="post-image" src="../images/second.jpg" alt="post">
            <div class="icons">
                <span><img src="../icons/like.png" alt="like"></span>
                <span><img src="../icons/dislike.png" alt="dislike"></span>
                <span><img src="../icons/comment.png" alt="comment"></span>
                <span><img src="../icons/save.png" alt="save"></span>
            </div>
            <h4 class="post-description">
                <?php echo $p[3]; ?>
            </h4>
        </div>
        <?php endforeach; ?>
        <div class="post">
            <h3 class="post-creator">Username</h3>
            <img class="post-image" src="../images/second.jpg" alt="post">
            <div class="icons">
                <span><img src="../icons/like.png" alt="like"></span>
                <span><img src="../icons/dislike.png" alt="dislike"></span>
                <span><img src="../icons/comment.png" alt="comment"></span>
                <span><img src="../icons/save.png" alt="save"></span>
            </div>
            <h4 class="post-description">Hello Jzr here</h4>
        </div>
        <div class="post">
            <h3 class="post-creator">Username</h3>
            <img class="post-image" src="../images/second.jpg" alt="post">
            <div class="icons">
                <span><img src="../icons/like.png" alt="like"></span>
                <span><img src="../icons/dislike.png" alt="dislike"></span>
                <span><img src="../icons/comment.png" alt="comment"></span>
                <span><img src="../icons/save.png" alt="save"></span>
            </div>
            <h4 class="post-description">Hello Jzr here</h4>
        </div>
    </div>
</body>

</html>